<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="/distance.js"></script>
		<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
		<script type="text/javascript" src="/jquery-simple-datetimepicker/jquery.simple-dtpicker.js"></script>
		<script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha512.js"></script>
<!-- load modules //-->
		<script type="text/javascript" src="/frontend/connection.js"></script>
		<script type="text/javascript" src="/frontend/core.js"></script>
		<script type="text/javascript" src="/frontend/jquery-info.js"></script>
		<script type="text/javascript" src="/frontend/gmaps-mgr.js"></script>
<!-- load modules //-->
		<link type="text/css" href="/jquery-simple-datetimepicker/jquery.simple-dtpicker.css" rel="stylesheet" />
		<link type="text/css" href="/strike4/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" />
		<link type="text/css" href="/strike4/additions.css" rel="stylesheet" />
	</head>
	<body>
		<table class='q-table'>
			<tr>
				<td><div id='info'></div></td>
				<td style='width: 6em'><div id='clock'></div></td>
			</tr>
		</table>
		<div id='tabs'>
			<ul>
				<li><a href='#tabs-n'>Map</a></li>
				<li><a href='#tabs-updates'>History</a></li>
				<li><a href='#tabs-query'>Query</a></li>
				<li><a href='#tabs-settings'>Settings</a></li>
			</ul>
			<div id='tabs-query'>
				<input type="text" id="start-date"></input>
				<input type="text" id="end-date"></input>
				<select id="modules-id"></select>
				<input type='button' id='query' value='Query'></input>
				<span id='radio'>
					<input type="radio" id="radio1" name="radio" checked="checked" /><label for="radio1">Waypoints</label>
					<input type="radio" id="radio2" name="radio" /><label for="radio2">Trips</label>
				</span>
				<input type='button' id='print-report' value='Print'></input>
				<div class='q-view'>
					<table id='query-table' class='q-table' ></table>
					<table id='trips-table' class='q-table'></table>
				</div>
			</div>
			<div id='tabs-updates'>
				<table id='updates-table' class='u-table'></table>
			</div>
			<div id='tabs-settings'>
				<table id='modulelist-table'></table>
				<input type='button' id='update-list' value='Update'>
				<input type='button' id='append-list' value='+'>
				<input type='password' id='update-pwd' placeholder='Password'>
			</div>
		</div>
		<div id='map'></div>
		<div id='select' style='visibility: hidden'>select</div>
		<iframe id='print-frame'></iframe>
		<script type="text/javascript">
			$(function(){
				var date = new Date;
				var yesterDate = date.getFullYear() + '-'
					+ (date.getMonth()+1) + '-' + (date.getDate()-1)
					+ ' ' + date.getHours() + ':' + date.getMinutes();
				//console.log(currentDate)
				$('#start-date').appendDtpicker({
					dateFormat: 'h:mm D.M.YYYY',
					current: yesterDate
				})
				$('#end-date').appendDtpicker({
					dateFormat: 'h:mm D.M.YYYY'
				})
			});
			$(function () {
				$('#query').button().click(core.query);
			});
			$(function () {
				$('#radio').buttonset().change(core.toggleQuery);
			});
			$(function () {
				$('#update-list').button().click(core.updateList);
			});
			$(function () {
				$('#append-list').button().click(core.addModuleId);
			});
			$(function () {
				$('#print-report').button().click(core.printReport);
			});
			$(function() {
				$('#tabs').tabs({
					activate: function(event, ui) {
						if('#tabs-settings' == ui.newTab.context.hash) {
							//getList();
						}
						if('#tabs-query' != ui.newTab.context.hash) {
							mapctl.hideTripHistory();
						}
					}
				});
			});
			$(function () {
				$('#info').info({'timeout': 300});
			});
		</script>
	</body>
</html>
